<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gideon+Roman&family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap" rel="stylesheet">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Throne of Curiosity</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(to right bottom, #9c9c9c , #4d4d4d) ;
            color: rgb(238, 238, 238);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }
        
        .Title{
            font-family:"Gideon Roman";
            margin-bottom: 20px;
            font-size: 2.5rem;
            color: rgb(238, 238, 238);
            text-align: center;
        }

        .content-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 1200px;
        }

        @media (min-width: 768px) {
            .content-container {
                flex-direction: row;
                align-items: flex-start;
                gap: 40px;
            }
        }

        .image-section {
            display: flex;
            flex-direction: column;
            align-items: center;
            width: 100%;
            max-width: 500px;
        }

        #silla-3d {
            width: 100%;
            max-width: 400px;
            height: 400px;
            border-radius: 10px;
            cursor: grab;
            overflow: hidden;
            position: relative;
            background: #f8f8f8;
            border: 1px solid #ddd;
            margin-bottom: 10px;
        }
        
        #silla-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 10px;
            transition: opacity 0.3s ease;
            opacity: 0;
        }
        
        .loading {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-family: "Roboto Flex", sans-serif;
            color: #666;
        }
        
        .progress-bar {
            width: 100%;
            max-width: 300px;
            height: 6px;
            background: #e0e0e0;
            border-radius: 3px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .progress {
            height: 100%;
            background: #8b8b8b;
            width: 0%;
            transition: width 0.3s ease;
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background-color: #8b8b8b;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 30px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 1.2rem;
        }
        
        button:hover:not(:disabled) {
            background-color: #767676;
        }
        
        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }
        
        .auto-rotate-btn.active {
            background-color: #5a5a5a;
        }

        .description-section {
            width: 100%;
            max-width: 500px;
            min-width: 250px;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            margin-top: 20px;
        }

        @media (min-width: 768px) {
            .description-section {
                margin-top: 0;
                flex: 1;
            }
        }

        .description-text {
            font-family: "Roboto Flex", sans-serif;
            line-height: 1.6;
            text-align: left;
            font-size: 1.1rem;
        }

        .description-text p {
            margin-bottom: 15px;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="Title">The Throne of Curiosity</h1>
    </header>

    <div class="content-container">
        <div class="image-section">
            <div id="silla-3d">
                <div class="loading" id="loading-text">Cargando imágenes... <span id="progress-text">0%</span></div>
                <img id="silla-image" src="" alt="Vista 3D de la silla" draggable="false">
            </div>
            
            <div class="progress-bar">
                <div class="progress" id="progress-bar"></div>
            </div>
            
            <div class="controls">
                <button id="left-btn" onclick="rotarIzquierda()" disabled>↶</button>
                <button id="right-btn" onclick="rotarDerecha()" disabled>↷</button>
                <button id="reset-btn" onclick="resetear()" disabled>↺</button>
                <button id="auto-rotate-btn" class="auto-rotate-btn" onclick="toggleAutoRotacion()" disabled>▶</button>
            </div>
        </div>

        <div class="description-section">
            <div class="description-text">
                <p>Con el pasar del tiempo los conceptos han variado, se han abierto, se han expandido. Esta obra tiene como objetivo ser un puente entre épocas. Es un proyecto personal, la recopilación de temas a los que acudo día a día, ya sean dudas, frases de libros que me han marcado e incluso reglas gramaticales de los idiomas que hablo (Español, Inglés, Portugués, Ruso y Japonés).</p>
                <p>Esta silla no deja de ser una silla si no te puedes sentar en ella, pasa a ser un concepto, un símbolo gracias a su esencia.</p>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let imagenesPrecargadas = [];
        let imagenActual = 0;
        let arrastrando = false;
        let ultimaPosX = 0;
        let autoRotacionActiva = false;
        let intervaloRotacion;
        const totalImagenes = 14;
        const extension = "jpg";

        // Elementos DOM
        const elementoImagen = document.getElementById('silla-image');
        const contenedor = document.getElementById('silla-3d');
        const autoRotateBtn = document.getElementById('auto-rotate-btn');
        const leftBtn = document.getElementById('left-btn');
        const rightBtn = document.getElementById('right-btn');
        const resetBtn = document.getElementById('reset-btn');
        const loadingText = document.getElementById('loading-text');
        const progressBar = document.getElementById('progress-bar');
        const progressText = document.getElementById('progress-text');

        // Precargar todas las imágenes
        function precargarImagenes() {
            let imagenesCargadas = 0;
            
            for(let i = 1; i <= totalImagenes; i++) {
                const img = new Image();
                img.src = `imagenes/${i}.${extension}`;
                
                img.onload = function() {
                    imagenesCargadas++;
                    const progreso = Math.round((imagenesCargadas / totalImagenes) * 100);
                    progressBar.style.width = `${progreso}%`;
                    progressText.textContent = `${progreso}%`;
                    
                    // Cuando todas las imágenes estén cargadas
                    if (imagenesCargadas === totalImagenes) {
                        imagenesPrecargadas = Array.from({length: totalImagenes}, (_, i) => `imagenes/${i+1}.${extension}`);
                        loadingText.style.display = 'none';
                        elementoImagen.style.opacity = '1';
                        
                        // Habilitar controles
                        leftBtn.disabled = false;
                        rightBtn.disabled = false;
                        resetBtn.disabled = false;
                        autoRotateBtn.disabled = false;
                        
                        // Mostrar primera imagen
                        imagenActual = 0;
                        elementoImagen.src = imagenesPrecargadas[0];
                        
                        console.log('Todas las imágenes precargadas');
                    }
                };
                
                img.onerror = function() {
                    console.error(`Error al cargar la imagen: imagenes/${i}.${extension}`);
                    imagenesCargadas++;
                };
            }
        }
        
        // Rotación con mouse - CON PREVENCIÓN DE COMPORTAMIENTO POR DEFECTO
        contenedor.addEventListener('mousedown', (e) => {
            if (imagenesPrecargadas.length === 0) return;
            
            e.preventDefault();
            arrastrando = true;
            ultimaPosX = e.clientX;
            contenedor.style.cursor = 'grabbing';
        });
        
        document.addEventListener('mousemove', (e) => {
            if (!arrastrando || imagenesPrecargadas.length === 0) return;
            
            e.preventDefault();
            
            const deltaX = e.clientX - ultimaPosX;
            
            if (deltaX > 5) {
                imagenActual = (imagenActual + 1) % totalImagenes;
                elementoImagen.src = imagenesPrecargadas[imagenActual];
                ultimaPosX = e.clientX;
            } else if (deltaX < -5) {
                imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
                elementoImagen.src = imagenesPrecargadas[imagenActual];
                ultimaPosX = e.clientX;
            }
        });
        
        document.addEventListener('mouseup', () => {
            arrastrando = false;
            contenedor.style.cursor = 'grab';
        });

        // Soporte para dispositivos táctiles - CON PREVENCIÓN
        contenedor.addEventListener('touchstart', (e) => {
            if (imagenesPrecargadas.length === 0) return;
            
            e.preventDefault();
            const touch = e.touches[0];
            ultimaPosX = touch.clientX;
        });

        contenedor.addEventListener('touchmove', (e) => {
            if (imagenesPrecargadas.length === 0) return;
            
            e.preventDefault();
            const touch = e.touches[0];
            const deltaX = touch.clientX - ultimaPosX;
            
            if (Math.abs(deltaX) > 10) {
                if (deltaX > 0) {
                    imagenActual = (imagenActual + 1) % totalImagenes;
                } else {
                    imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
                }
                elementoImagen.src = imagenesPrecargadas[imagenActual];
                ultimaPosX = touch.clientX;
            }
        });

        // Context menu prevention (click derecho)
        contenedor.addEventListener('contextmenu', (e) => {
            e.preventDefault();
            return false;
        });

        // Funciones de control
        function rotarDerecha() {
            if (imagenesPrecargadas.length === 0) return;
            
            imagenActual = (imagenActual + 1) % totalImagenes;
            elementoImagen.src = imagenesPrecargadas[imagenActual];
        }
        
        function rotarIzquierda() {
            if (imagenesPrecargadas.length === 0) return;
            
            imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
            elementoImagen.src = imagenesPrecargadas[imagenActual];
        }
        
        function resetear() {
            if (imagenesPrecargadas.length === 0) return;
            
            imagenActual = 0;
            elementoImagen.src = imagenesPrecargadas[0];
        }
        
        // Función de rotación automática
        function toggleAutoRotacion() {
            if (imagenesPrecargadas.length === 0) return;
            
            if (autoRotacionActiva) {
                clearInterval(intervaloRotacion);
                autoRotacionActiva = false;
                autoRotateBtn.textContent = "▶";
                autoRotateBtn.classList.remove('active');
            } else {
                autoRotacionActiva = true;
                autoRotateBtn.textContent = "II";
                autoRotateBtn.classList.add('active');
                
                intervaloRotacion = setInterval(() => {
                    if (!arrastrando) {
                        imagenActual = (imagenActual + 1) % totalImagenes;
                        elementoImagen.src = imagenesPrecargadas[imagenActual];
                    }
                }, 100);
            }
        }

        // Ejecutar cuando cargue la página
        document.addEventListener('DOMContentLoaded', function() {
            precargarImagenes();
        });
    </script>
</body>
</html>