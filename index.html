<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gideon+Roman&family=Roboto+Flex:opsz,wght@8..144,100..1000&display=swap">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Silla 3D Interactiva - GitHub Pages</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(to right, #e2e2e2 ,#ffffff 10%, #ffffff 90%, #e2e2e2 100% ) ;
            color: rgb(51, 51, 51);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            text-align: center;
        }
        
        .Title{
            font-family:"Gideon Roman";
        }

        #silla-3d {
            width: 100%;
            height: 400px;
            border-radius: 10px;
            cursor: grab;
            overflow: hidden;
        }
        
        #silla-image {
            width: 100%;
            height: 100%;
            object-fit: contain;
            border-radius: 20px;            
        }
        
        .controls {
            margin: 20px 0;
        }
        
        button {
            background-color: #8b8b8b;
            color: #fff;
            border: none;
            padding: 10px 20px;
            margin: 5px;
            border-radius: 30px;
            cursor: pointer;
        }
        
        .url-display {
            background: rgba(255, 255, 255, 0.2);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            font-family: monospace;
            word-break: break-all;
        }
        
        .qr-code {
            background: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px auto;
            display: inline-block;
        }

        .test-area {
            background: rgba(255, 255, 255, 0.1);
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
        }
    </style>
</head>
<body>
    <header>
        <h1 class="Title">The Throne of Curiosity</h1>
    </header>

    <div id="silla-3d">
        <img id="silla-image" src="imagenes/1.jpg" alt="Vista 3D de la silla">
    </div>
    
    <div class="controls">
        <button onclick="rotarIzquierda()">↶</button>
        <button onclick="rotarDerecha()">↷</button>
        <button onclick="resetear()">⭿</button>
        <button id="auto-rotate-btn" class="auto-rotate-btn" onclick="toggleAutoRotacion()">▶</button>
    </div>      

    <div class="success-message">
        
        <div class="url-display" id="current-url">
        </div>
        
        <div class="qr-code">
            <img id="qr-image" src="" alt="Código QR" width="200" height="200">
        </div>
    </div>


    <script>
        // Variables globales
        const imagenes = [];
        let imagenActual = 0;
        let arrastrando = false;
        let ultimaPosX = 0;
        let autoRotacionActiva = false;
        let intervaloRotacion;

        // Actualizar código QR con la URL actual
        function updateQRCode() {
            const currentUrl = window.location.href;
            const qrImage = document.getElementById('qr-image');
            const urlDisplay = document.getElementById('current-url');
            
            qrImage.src = `https://api.qrserver.com/v1/create-qr-code/?size=200x200&data=${encodeURIComponent(currentUrl)}`;
            urlDisplay.textContent = `URL: ${currentUrl}`;
        }
        
        const totalImagenes = 14;  // Cambia por el número real de tus imágenes
        const extension = "jpg"

        for(let i = 1; i <= totalImagenes; i++) {
            imagenes.push(`imagenes/${i}.${extension}`);
        }
        
        const elementoImagen = document.getElementById('silla-image');
        const contenedor = document.getElementById('silla-3d');
        const autoRotateBtn = document.getElementById('auto-rotate-btn');

        elementoImagen.src = imagenes[0];
        // Rotación con mouse
        contenedor.addEventListener('mousedown', (e) => {
            arrastrando = true;
            ultimaPosX = e.clientX;
            contenedor.style.cursor = 'grabbing';
        });
        
        document.addEventListener('mousemove', (e) => {
            if (!arrastrando) return;
            
            const deltaX = e.clientX - ultimaPosX;
            
            if (deltaX > 5) { // Mover derecha
                imagenActual = (imagenActual + 1) % totalImagenes;
                elementoImagen.src = imagenes[imagenActual];
                ultimaPosX = e.clientX;
            } else if (deltaX < -5) { // Mover izquierda
                imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
                elementoImagen.src = imagenes[imagenActual];
                ultimaPosX = e.clientX;
            }
        });
        
        document.addEventListener('mouseup', () => {
            arrastrando = false;
            contenedor.style.cursor = 'grab';
        });

        contenedor.addEventListener('touchmove', (e) => {
            e.preventDefault();
            const touch = e.touches[0];
            const deltaX = touch.clientX - ultimaPosX;
            
            if (Math.abs(deltaX) > 10) {
                if (deltaX > 0) {
                    imagenActual = (imagenActual + 1) % totalImagenes;
                } else {
                    imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
                }
                elementoImagen.src = imagenes[imagenActual];
                ultimaPosX = touch.clientX;
            }
        });
        // Funciones de control
        function rotarDerecha() {
            imagenActual = (imagenActual + 1) % totalImagenes;
            elementoImagen.src = imagenes[imagenActual];
        }
        
        function rotarIzquierda() {
            imagenActual = (imagenActual - 1 + totalImagenes) % totalImagenes;
            elementoImagen.src = imagenes[imagenActual];
        }
        
        function resetear() {
            imagenActual = 0;
            elementoImagen.src = imagenes[0];
        }
        
        // Función de rotación automática
        function toggleAutoRotacion() {
            if (autoRotacionActiva) {
                // Detener rotación automática
                clearInterval(intervaloRotacion);
                autoRotacionActiva = false;
                autoRotateBtn.textContent = "▶";
                autoRotateBtn.classList.remove('active');
            } else {
                // Iniciar rotación automática
                autoRotacionActiva = true;
                autoRotateBtn.textContent = "II Detener Auto";
                autoRotateBtn.classList.add('active');
                
                intervaloRotacion = setInterval(() => {
                    if (!arrastrando) {
                        imagenActual = (imagenActual + 1) % totalImagenes;
                        elementoImagen.src = imagenes[imagenActual];
                    }
                }, 100); // Cambia cada 300ms
            }
        }

        // Ejecutar cuando cargue la página
        document.addEventListener('DOMContentLoaded', function() {
            updateQRCode();
            console.log('Página cargada en:', window.location.href);
        });
    </script>
</body>
</html>